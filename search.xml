<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Paper-Dijkstra1975-Guarded-Commands]]></title>
    <url>%2F2019-04-22%2FPaper-Dijkstra1975-Guarded-Commands%2F</url>
    <content type="text"><![CDATA[Guarded Commands, Nondeterminacy and Formal Derivation of Programsby Dijkstra / 1975 dl: Dijkstra1975 Dijkstra ä»‹ç»äº†ä¸€ç§æž„å»ºç¨‹åºçš„æ–¹å¼ï¼Œå³ â€œguarded commandsâ€ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥æè¿° nondeterminstic ç¨‹åºã€‚define nondeterminism: ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­è¡Œä¸ºã€ç”šè‡³ç¨‹åºçš„ç»ˆç»“æ€ï¼Œéƒ½æ— æ³•æ ¹æ®ç¨‹åºçš„åˆå§‹çŠ¶æ€å”¯ä¸€ç¡®å®šã€‚ æ–‡ç« ä¸»ä½“åˆ†ä¸‰éƒ¨åˆ†ï¼š guarded commands è¡¨è¾¾ä½“ç³»ï¼Œä¸€ç§ç›´è§‚æ€§çš„ä»‹ç» alternative construct å’Œ repetitive construct æ­£å¼çš„å®šä¹‰ guarded commands ä½“ç³»ä¸‹çš„ç¨‹åºæŽ¨æ¼”ï¼šå‘ˆçŽ°ä¸ºä¸€ç§è§„åˆ™ä¸–ç•Œï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç®—æ³• å…³äºŽ guarded commands ç›´è§‚è¡¨è¾¾ï¼Œå› ä¸ºåŽŸæ–‡å®žåœ¨æƒŠè‰³ï¼Œæˆ‘å†³å®šæŠŠè¿™æ®µå®šä¹‰æ‘˜æŠ„ä¸€ä¸‹ï¼š 1234567&lt;guarded command&gt; ::= &lt;guard&gt; -&gt; &lt;guared list&gt;&lt;guard&gt; ::= &lt;boolean expression&gt;&lt;guarded list&gt; ::= &lt;statement&gt; &#123;; &lt;statement&gt;&#125;&lt;statement&gt; ::= &lt;alternative construct&gt; | &lt;repetitive construct&gt; | &quot;other statements&quot;&lt;alternative construct&gt; ::= if &lt;guarded command set&gt; fi&lt;repetitive construct&gt; ::= do &lt;guarded command set&gt; od&lt;guarded command set&gt; ::= &lt;guarded command&gt; &#123;[] &lt;guarded command&gt;&#125; Formal Definition of the Semantics ç”¨ç¦»æ•£æ•°å­¦æ›¿æ¢äº†ä¸€ä¸‹ if fi &amp; do od çš„è¡¨è¾¾ weakest pre-conditions çš„æŽ¨æ¼”è§„åˆ™ æ„Ÿå—ï¼šæžšä¸¾å¤§æ³•å¥½ï¼›é€’å½’å¤§æ³•å¥½ã€‚ æ³¨æ„ Dijkstra æäº†å‡ ä¸ªæ¦‚å¿µï¼š [pre | post] conditions predicate transformer, weakest pre-conditions wp å…¶å®žæœ€åŽçš„ Concluding Remarks æ˜¯æˆ‘è§‰å¾—æœ€å€¼å¾—è¯»çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æœ€æœ‰è¶£çš„ï¼Œæˆ‘åœ¨æ·±å¤œåå¤è¯»è¿™å‡ æ®µï¼Œæ„Ÿè§‰éžå¸¸æ„‰æ‚¦ã€‚æ‘˜å½•å¦‚ä¸‹ï¼š The resarch, the outcome of which is reported in this article, was triggered by the observation that Euclidâ€™s Algorithm could also be regarded as synchronizing the two cyclic processes do x:=x-y od and do y:=y-x od in such a way that the relation x&gt;0 and y&gt;0 would be kept invariantly true. It was only after this observation that we saw that the formal techniques we had already developed for the derivation of the synchronizing conditions that ensure the harmonious cooperation of (cyclic) sequential processes, such as can be identified in the total activity of operating systems, could be transferred lock, stock, and barrel to the development of sequential programs as shown in this article. The main difference is that while for sequential programs the situation â€œall guards falseâ€ is a desirable goal - for it means termination of a repetitive construct - one tries to avoid it in operating systems - for there it means deadlock. ç¥žå¥‡çš„æ˜¯ï¼Œåœ¨ä¸åŒçš„æ–¹å‘ä¸Šè¶Šèµ°è¶Šæ·±çš„æ—¶å€™ï¼Œç»å¸¸ç«Ÿå‘çŽ°å…¶ä¸­è´¯é€šä¹‹å¤„ã€‚æˆ‘å…¶å®žæ›´å€¾å‘å°†å®ƒå½’ç»“äºŽäººçš„æ€è€ƒæ–¹å¼æœ¬èº«ã€‚å…³äºŽä»–è¯´çš„ programming langugage å’Œ operating systems ä¸­çš„å…±åŒä¹‹å¤„ï¼Œæˆ‘è¿˜å¸Œæœ›æ›´æ·±å…¥åœ°è¿›è¡Œæ€è€ƒã€‚ The second reason to pursue these investigations was my personal desire to get a better appreciation, which part of the programming activity can be reguarded as a formal routine and which part of it seems to require â€œinventionâ€. While the design of an alternative construct now seems to be a reasonably straightforward activity, that of a repetitive construct requires what I regard as â€œthe inventionâ€ of an invariant relation and a variant function. My presentation of this calculus should, however, not be interpreted as my suggestion that all programs should be developed in this way: it just gives us another handle. ä¸ªäººç»åŽ†ä¸­ï¼Œprogramming ç»å¸¸æ˜¯è‚Œè‚‰æ´»åŠ¨ï¼Œä½†æ—¶ä¸æ—¶å†’å‡ºçš„ â€œinventionâ€ï¼Œè¿˜æœ‰çµå…‰çš„æ—¶åˆ»ï¼Œå®žåœ¨æ˜¯è®©äººå…´å¥‹å’Œæ»¡è¶³ã€‚ The calculus does, however, explain my preference for the axiomatic definition of programming language semantics via predicate transformers above other definition techniques: the definition via predicate transformers seems to lend itself most readily to being forged into a tool for the goal-directed activity of program composition. è¡¨è¾¾æ–¹å¼çœŸçš„ä¼šå½±å“å¾ˆå¤šã€‚æˆ‘ç»å¸¸ä¼šæƒ³æŸç§è¯­è¨€é€‰æ‹©äº†æŸç§è¡¨è¾¾æ–¹å¼ï¼Œè®¾è®¡è€…çœŸæ­£æƒ³åšçš„æ˜¯ä»€ä¹ˆã€‚åœ¨æˆ‘ä»Ž Java è½¬å‘ Golang åŽå…³äºŽè¿™æ–¹é¢çš„æ€è€ƒæ„ˆå‘å¤šäº†ã€‚å…³äºŽè¿™ä¸€æ®µæ‰€è¯´çš„ï¼Œæˆ‘è¿˜ä¸å¤ªæœ‰åˆ‡èº«ä½“ä¼šï¼Œå¸Œæœ›è¿›ä¸€æ­¥å­¦ä¹ ã€‚ Finally, I would like to add a word or two about the potential nondeterminacy. Having worked mainly with hardly self-checking hardware, with which nonreproducing behavior of user programs is a very strong indication of a machine malfunctioning, I had to overcome a considerable mental resistance before I found myself willing to consider nondeterministic programs seriously. It is, however, fair to say that I could nver have discovered the calculus before having taken that hurdle: the simplicity and elegance of the above would have been destroyed by requiring the derivation of deterministic programs only. Whether nondeterminacy is eventually removed mechanically - in order not to mislead the maintenance engineer - or (perhaps only partly) by the programmer himself because, at second thought, he does care - e.g. for reasons of efficiency - which alternative is chosen is something I leave entirely to the circumstance. In any case we appreciate the nondeterministic program as a help stepping stone. ðŸ‘†è¯»è¿™æ®µè¶…æƒ³ç¬‘ï¼ŒçœŸçš„ç¬‘äº†ã€‚è¿˜æ˜¯å‘ä»–å­¦ä¹ ã€‚ æˆ‘å°†è¿›ä¸€æ­¥æ€è€ƒçš„é—®é¢˜ï¼š è¿™ç¯‡æ–‡ç« æ˜¯åœ¨ä»€ä¹ˆèƒŒæ™¯ä¸‹äº§ç”Ÿçš„ï¼Œå®ƒçš„åŠ¨æœºæ˜¯ä»€ä¹ˆ å¯¹æ¯” Hoare çš„ An axiomatic basis for computer programming å’Œ communicating Sequential Processes programming language &amp; operating systems invention in programming activity axiomatic definition of programming language semantics via predicate transformers]]></content>
      <categories>
        <category>cs</category>
      </categories>
      <tags>
        <tag>Dijkstra</tag>
        <tag>paper</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JDK-java.lang.Integer]]></title>
    <url>%2F2017-07-12%2FJDK-java-lang-Integer%2F</url>
    <content type="text"><![CDATA[Integer é‡Œæœ‰ç‚¹æ„æ€çš„åœ°æ–¹ ç”Ÿæˆä¸€ä¸ªå®žä¾‹#123public final class Integer extends Number implements Comparable&lt;Integer&gt; &#123; private final int value; // æ ¸å¿ƒ&#125; åŒ…è£…çš„ value æ˜¯ final fieldã€‚å¦‚æžœé¡ºåºæ‰§è¡Œ Integer haha = new Integer(1000);, haha = 8;, haha = 30000;ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼š 1234567891011121314/* * æ–°å»º hahaï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªæ–°å®žä¾‹ï¼Œvalue = 1000ï¼› */Integer haha = new Integer(1000);/* * è‡ªåŠ¨è£…ç®±ï¼Œæ„ä¹‰ç­‰åŒäºŽ haha = Integer.valueOf(8)ï¼Œhaha æŒ‡å‘å¦å¤–çš„å€¼ä¸º 8 çš„å®žä¾‹ã€‚ * 8 åœ¨ IntegerCache èŒƒå›´ä¹‹å†…ï¼Œhaha æŒ‡å‘çš„æ˜¯ç¼“å­˜æ± ä¸­æ—©å°±ç”Ÿæˆå¥½çš„ä¸€ä¸ªå®žä¾‹ï¼› * ä¸Šä¸€æ­¥çš„å®žä¾‹ç­‰ GC åˆ°äº†ä¼šè¢«å›žæ”¶ */ haha = 8; /* * ä¸€èˆ¬æƒ…å†µä¸‹ 30000 ä¸åœ¨ IntegerCache èŒƒå›´å†…ï¼Œæ‰€ä»¥æœ€ç»ˆæ˜¯ new Integer(30000) ç”Ÿæˆçš„å®žä¾‹ */haha = 30000; new Integer() &amp; Integer.valueOf()#Integer i = 1000; æ—¶è‡ªåŠ¨è£…ç®±ï¼Œå…¶å®žæ˜¯ Integer i = Integer.valueOf(1000); 12345public static Integer valueOf(int i) &#123; if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i);&#125; æ‰€ä»¥å¾ˆæ˜Žæ˜¾äº†ï¼Œnew Integer() æ¯æ¬¡éƒ½æ–°å»ºä¸€ä¸ªå®žä¾‹ï¼ŒInteger.valueOf() å¯¹äºŽ IntegerCache ä¸­å·²ç»ç¼“å­˜è¿‡çš„å–å€¼ï¼Œä¼šè¿”å›žç¼“å­˜æ± é‡Œçš„å®žä¾‹ã€‚ çœ‹ä¸€ä¸‹IntegerCache æ˜¯ä»€ä¹ˆï¼š IntegerCache#12345678910111213141516171819202122232425262728293031323334private static class IntegerCache &#123; static final int low = -128; static final int high; static final Integer cache[]; // è¿žç»­çš„æ•´æ•°ï¼Œæœ€é«˜ä¸º highï¼Œæœ€ä½Žä¸º low private IntegerCache() &#123;&#125; static &#123; int h = 127; // high value may be configured by property /* åˆ¤æ–­ high çš„å–å€¼ï¼Œé»˜è®¤127ï¼Œæœ€ä½Ž127ï¼Œå¯ä»¥è¢«è‡ªå®šä¹‰ */ String integerCacheHighPropValue = sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high"); if (integerCacheHighPropValue != null) &#123; try &#123; int i = parseInt(integerCacheHighPropValue); i = Math.max(i, 127); h = Math.min(i, Integer.MAX_VALUE - (-low) -1); &#125; catch (NumberFormatException nfe) &#123; // ignore &#125; &#125; /* åˆ¤æ–­ high çš„å–å€¼ç»“æŸ */ high = h; caceh = new Integer[(high - low) + 1]; int j = low; for (int k = 0; k &lt; cache.length; k++) cache[k] = new Integer(j++); // range [-128, 127] must be interned (JLS7 5.1.7) // è§„å®šäº† high æœ€å°ä¸º 127 assert IntegerCache.high &gt;= 127; &#125;&#125; æ‰€ä»¥ IntegerCache æ˜¯ Integer çš„ç§æœ‰å†…éƒ¨é™æ€ç±»ï¼Œç¼–è¯‘ä¹‹åŽæ˜¯ Integer$IntegerCache.classã€‚å®ƒçš„ç±»å˜é‡ï¼Œcache[] å­˜å‚¨äº†ä¸€äº› Integer çš„å®žä¾‹ï¼Œhigh å’Œ low ç”¨æ¥ç¡®å®šå“ªä¸ªå–å€¼èŒƒå›´å†…çš„ Integer ä¼šè¢«å­˜å‚¨åˆ° cache[] ä¸­åŽ»ã€‚åœ¨ IntegerCache è¿™ä¸ªç±»è¢«åŠ è½½çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œé™æ€åˆå§‹åŒ–ä»£ç å—ï¼Œè¿™ä¸ªé‡Œé¢ä¼šç¡®å®š high çš„å–å€¼ï¼Œå®ƒæ˜¯å…è®¸è‡ªå®šä¹‰çš„ï¼Œå¹¶æŒ‰ç…§ [low, high] è¿™ä¸ªèŒƒå›´è®¾ç½® cache[] çš„å¤§å°å¹¶ç¼“å­˜è¿žç»­çš„å–å€¼ã€‚ æž„é€ æ–¹æ³•ç§æœ‰åŒ–#å› ä¸ºæˆ‘ä»¬åªä¼šé™æ€è®¿é—®è¿™ä¸ªç±»ï¼Œå¹¶ä¸éœ€è¦ IntegerCache çš„å®žä¾‹ï¼Œåªéœ€è¦ç±»è¿™ä¸ª class å¯¹è±¡ã€‚ æ•´æ•°ç±»æ‰æœ‰çš„å¥—è·¯#ç±»ä¼¼çš„ï¼Œè¿˜æœ‰ ByteCache, ShortCache, LongCacheï¼Œåˆ†åˆ«æ˜¯ Byte, Short, Long çš„ç§æœ‰å†…éƒ¨é™æ€ç±»ï¼Œä¸è¿‡å®ƒä»¬çš„ç¼“å­˜èŒƒå›´æ˜¯å›ºå®šä¸º [-127, 128] çš„ï¼Œä¸åƒ Integer å¯ä»¥è®¾ç½® high çš„å–å€¼ã€‚å¯¹äºŽæµ®ç‚¹ç±» Float å’Œ Doubleï¼Œå®ƒä»¬åœ¨è‡ªåŠ¨è£…ç®±æˆ–è€…ä½¿ç”¨ valueOf() æ—¶éƒ½æ˜¯æ–°å»ºä¸€ä¸ªå®žä¾‹ï¼Œä¹Ÿæ²¡æœ‰æ‰€è°“çš„ FloatCache æˆ–è€… DoubleCacheã€‚å¯¹äºŽ Boolean è¿™ä¸ªé€»è¾‘ç±»åž‹ï¼Œéžå¸¸ç®€å•çš„ true or falseï¼Œæ²¡æœ‰å¿…è¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦ä½¿ç”¨æ•°ç»„ï¼Œè€Œæ˜¯ç®€å•çš„ï¼š1234public final class Boolean &#123; public static final Boolean TRUE = new Boolean(true); public static final Boolean FALSE = new Boolean(false);&#125;]]></content>
      <categories>
        <category>cs</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>jdk</tag>
      </tags>
  </entry>
</search>